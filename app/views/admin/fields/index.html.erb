<% content_for :page_title, t("Fields") %>

<%= render "shared/page_header",
    title: t("Fields"),
    action_url: new_admin_field_path,
    action_text: t("fields.new") %>

<%= render "shared/table",
  columns: [
    { header: t("fields.table.name"), cell: ->(r){ link_to r.name, admin_field_roadmaps_path(r), class: "text-blue-600 hover:underline font-medium" } },
    { header: t("fields.table.description"), cell: ->(r){ truncate(r.description.to_s, length: 80) } },
    { header: t("fields.table.status"), cell: ->(r){ render "shared/badge", text: r.status.humanize, color: r.active? ? "green" : "gray" } },
    { header: t("fields.table.roadmaps"), cell: ->(r){ r.roadmaps.count } }
  ],
  rows: @fields,
  pagy: @pagy,
  actions: ->(r){ 
    link_to(t("fields.actions.edit"), edit_admin_field_path(r), class: "text-blue-600 hover:underline") +
    " | ".html_safe +
    link_to(t("fields.actions.roadmaps"), admin_field_roadmaps_path(r), class: "text-green-600 hover:underline") +
    " | ".html_safe +
    button_to(t("fields.actions.delete"), admin_field_path(r), method: :delete, form: { data: { turbo_confirm: t("fields.actions.confirm_delete") } }, class: "text-red-600 hover:underline inline")
  } %>
